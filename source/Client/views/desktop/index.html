{{#extend "head"}}
	<link rel="apple-touch-icon" sizes="72x72" href="/guis.common/images/ipad_icon.png" />

	<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

	<script type="text/javascript" src="/guis.common/libraries/jquery/jquery.migrate.min.js"></script>
	<script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.jPopover.js"></script>
    <script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jsTree/jquery.jstree.js"></script>
    <script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.toastmessage.js"></script>

    <script type="text/javascript" src="/guis.common/libraries/moment.min.js"></script>
    <script type="text/javascript" src="/guis.common/libraries/lodash.min.js"></script>
	<script type="text/javascript" src="/guis.common/libraries/adapter.js"></script>
    <script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.autogrow.js"></script>
    <script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.jeditable.js"></script>
    <script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.jeditable.autogrow.js"></script>
    <script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.dotdotdot.js"></script>

	<script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.mousewheel.js"></script>
	<script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.scrollTo.min.js"></script>

	<script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.svg.min.js"></script>
	<script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.svgdom.min.js"></script>
	<script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.svgfilter.min.js"></script>
	<script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.svganim.min.js"></script>

	<!-- Library for creating data driven complex svg graphs. -->
	<script type="text/javascript" src="/guis.common/libraries/d3/d3.min.js"></script>

	<script type="text/javascript" src="/guis.common/libraries/jquery/jquery-ui.js"></script>
	<link type="text/css" href="/guis.common/libraries/jquery/css/jquery-ui.css" rel="Stylesheet" />

	<script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.ui.touch-punch.min.js"></script>

	<script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.color.js"></script>

	<script src="/config.js"></script>
	<script src="/Helper.js"></script>
	<script src="/Dispatcher.js"></script>
	<script src="/ObjectManager.js"></script>

	<script src="/WebRTCManager.js"></script>

	<script src="/Common/Log.js"></script>
	<script src="/Common/DataSet.js"></script>
	<script src="/Common/ActionManager.js"></script>
	<script src="/Common/AttributeManager.js"></script>
	<script src="/Common/TranslationManager.js"></script>

    <script src="/aclManager-client.js"></script>
    <script src="/socketClient.js"></script>
    <script src="/dialogs/objectDeviceCoupling-dialog.js"></script>
    <script src="/dialogs/objectDeviceDeCoupling-dialog.js"></script>
    <script src="/dialogs/objectDeviceCouplingRequest-dialog.js"></script>
    <script src="/dialogs/objectDeviceCouplingRequestQR-dialog.js"></script>
    <script src="/couplingManager-client.js"></script>

    <script src="/guis.common/libraries/spectrum/spectrum.js"></script>
    <link type="text/css" rel="Stylesheet" href="/guis.common/libraries/spectrum/spectrum.css" />

	<script>
	var  Modules = {
		'Log':Log,
		'config':Config,
		'Config':Config,
		'Dispatcher':Dispatcher,
		'ObjectManager':ObjectManager,
		'Helper':Helper,

		// Object specific

		'DataSet':DataSet,
		'AttributeManager':AttributeManager,
		'TranslationManager':TranslationManager,
		'ActionManager':ActionManager
	};

	$(document).ready(function() {
        // DUI
        Modules.MobileDetect = new MobileDetect(window.navigator.userAgent);

        Modules.SocketClient    = new SocketClient();
        Modules.ACLManager      = new ACLManagerClient();
        Modules.CouplingManager = new CouplingManager();

		for (var name in Modules) {
			var module = Modules[name];
			if (module.init) {
				module.init(Modules);
				module.Modules = Modules;
			}
		}

        new TranslationDE();
        new TranslationEN();
        new TranslationES();

		document.title = Modules.Config.projectTitle || 'WebArena';
	});

	</script>

	<script src="/objects"></script>

	<script type="text/javascript" src="/defaultJavascripts"></script>

    <link type="text/css" href="/views/desktop/style.css" rel="Stylesheet" />
	<link type="text/css" href="/guis.common/css/actionsheet.css" rel="Stylesheet" />
	<link type="text/css" href="/guis.common/css/progressBar.css" rel="Stylesheet" />
	<link type="text/css" href="/guis.common/css/login.css" rel="Stylesheet" />
	<link type="text/css" href="/guis.common/css/studiolo.css" rel="Stylesheet" />
    <link type="text/css" href="/guis.common/css/userInfo.css" rel="Stylesheet" />
    <link type="text/css" href="/guis.common/css/object-device-couplingDialog.css" rel="Stylesheet" />
    <link type="text/css" href="/guis.common/css/object-device-request-dialog.css" rel="Stylesheet" />

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

	<script type="text/javascript" src="/guis.common/libraries/jquery/plugins/jquery.jDesktopInspector.js"></script>
	<link type="text/css" href="/guis.common/libraries/jquery/plugins/css/jquery.jDesktopInspector.css" rel="Stylesheet" />
	<link type="text/css" href="/guis.common/libraries/jquery/plugins/css/jquery.jPopover.desktop.css" rel="Stylesheet" />

    <script type="text/javascript" src="/views/desktop/main.js"></script>
	<script>

        /**
         * Define room which will be loaded (value will be replaced by node.js Webserver)
         */
        GUI.startRoom = '{{start_room}}';

        /**
         * check if device is touch-device
         */
        if (!!('ontouchstart' in window)) {
            GUI.isTouchDevice = true;
        }

        /**
         * jQuery extension used to prevent scrolling of sidebar/body when scrolling of sidebar contents hits top/bottom (e.g. for chat messages container)
         */
        $.fn.dontScrollParent = function() {
            this.bind('mousewheel DOMMouseScroll',function(e)
            {
                var delta = e.originalEvent.wheelDelta || -e.originalEvent.detail;

                if (delta > 0 && $(this).scrollTop() <= 0)
                    return false;
                if (delta < 0 && $(this).scrollTop() >= this.scrollHeight - $(this).height())
                    return false;

                return true;
            });
        }

	</script>

{{/extend}}
{{#extend "body"}}
	
	<div id="header">
		<div class="header_right"></div>
		<div class="header_left"></div>
		<div class="header_tabs_sidebar animate">
			<div id="header_toggle_sidebar">
				<img id="header_toggle_sidebar_hide" src="/guis.common/images/arrow-right.png" alt="" style="width: 18px; height: 18px;">
				<img id="header_toggle_sidebar_show" src="/guis.common/images/arrow-left.png" alt="" style="width: 18px; height: 18px; display: none;">
			</div>
		</div>
		
	</div>

	<div id="couplingNavigation"></div>
	
	<div id="content">
		<p style="z-index:10; position:fixed;" id="besideMouse"></p>
	</div>
	
	<div id="sidebar">
		<div id="sidebar_title"><span></span></div>
		<div id="sidebar_content">
			<div>
				<div id="inspector"></div>
				<div id="userInfo"></div>
                <div id="chat"></div>
                <div id="pad"><iframe name="padframe"></iframe></div>
			</div>
		</div>
	</div>
	
	<div id="actionsheet"></div>
	
	<div id="error_bg"></div>
	<div id="error_box">
		
		<div id="error_box_heading"></div>
		<div id="error_box_message"></div>
		<div id="error_box_button"></div>
		
	</div>

	<div id="login_background" style="display: none">&nbsp;</div>
	<div id="login" style="display: none;">
		<div class="login_title" id="login_title">Webarena 1.0</div>
		<div class="login_error"></div>
		<div class="login_icon login_icon_username"></div><input type="text" name="username" value="{{username}}" id="login_username" class="login_input" autocomplete="off" placeholder="Username" autofocus="autofocus" />
		<br />
		<div class="login_icon login_icon_password"></div><input type="password" name="password" value="{{password}}" id="login_password" class="login_input" autocomplete="off" />
		<br />
		<input type="submit" name="login" value="Login" class="login_submit" id="login_submit" />
	</div>
	<div id="progressBar"><div class="progressBar_container"></div></div>

  <!-- BEGIN: Underscore Template Definition. -->
  <script type="text/template" id="proceeding-statusdialog">
    <div>
      <table>
        <tr>
          <th></th>
          <th>Name</th>
          <th>Startdatum</th>
          <th>Enddatum</th>
        </tr>
      <% _.each(milestones, function(mileStone, index) { %>
        <tr>
          <td>
        <input type="checkbox" name="" value="" <%= mileStone.done ? 'checked disabled' : ''%> >
          </td>
          <td>
            <%- mileStone.name %>
          </td>
          <td>
            <%- mileStone.startdate || "Nicht gesetzt" %>
          </td>
          <td>
            <% if( editable == index){ %>
            <input  class="datepicker-trigger" type="text" value="<%- mileStone.enddate %>">
            <% } else { %>
            <%- mileStone.enddate || "Nicht gesetzt" %>
            <% } %>
          </td>
        <tr>
      <% }); %>
      </table>
    </div>
  </script>
  <script type="text/template" id="process-log-entry-template">
    <div>
      <% _.each(logEntries, function(logEntry) { %>
      <p class="<%= logEntry.cssclass %>"> <%= moment(logEntry.timestamp).format("DD.MM.YY, HH:mm:ss") %> <br/>
        <%= logEntry.message %></p>
      <% }); %>
    </div>
  </script>
  <script type="text/template" id="discussion-message-template">

    <div class='discussion-statement <%- additionalClasses %>' data-message-id='<%- message.timestamp %>'>
      <div class='discussion-statement-heading'>
        <span class='message-author'> <%- message.author %> </span>
        <span class='message-timestamp'>( <%- message.formattedTimestamp %> )</span>
      </div>
      <p class='discussion-statement-text'> <%- message.text %> </p>
	  <span class="minimize-button" id="deleteStatement"></span>
    </div>
  </script>
  <script type="text/template" id="discussion-container-template">
    <div class="discussion">
      <div class="embedded-toolbar moveArea">
        <span class="minimize-button" id="minimizeDiscussion"></span>
      </div>
      <div class="discussion-content">
        <div class="discussion-heading"> <%- heading %>
        </div>
        <div class="discussion-text"></div>
      </div>
      <input class="discussion-input" placeholder=Texteingabe>
    </div>
  </script>
  <script type="text/template" id="coupling-dialog-template">
    <div class="coupling-device">
        <table>
            <thead>
            <tr>
                <th><span>Select</span></th>
                <th><span>Device Name</span></th>
                <th><span>WADIV</span></th>
            </tr>
            </thead>
            <tbody>
            <% _(devices).each(function(device) { %>
            <tr>
                <td><input type="checkbox" name="devices" value="<%= device.WADIV %>" id="<%= device.WADIV %>"></td>
                <td><%= device.username %></td>
                <td><%= device.WADIV %></td>
            </tr>
            <% }); %>
            </tbody>
        </table>
    </div>
  </script>
  <script type="text/template" id="decoupling-dialog-template">
    <div class="coupling-device">
        <table>
            <thead>
            <tr>
                <th><span>Select</span></th>
                <th><span>WADIV</span></th>
            </tr>
            </thead>
            <tbody>
            <% _(devices).each(function(device) { %>
            <tr>
                <td><input type="checkbox" name="devices" value="<%= device %>" id="<%= device %>"></td>
                <td><%= device %></td>
            </tr>
            <% }); %>
            </tbody>
        </table>
    </div>
  </script>
  <script type="text/template" id="coupling-request-dialog-template">
        <div class="coupling-device-request">
            <span>Enter the Id of the object to couple with.</span><br>
            <input id="objectID" type="text" name="idObject" value="">
        </div>
  </script>
  <script type="text/template" id="coupling-request-qr-dialog-template">
      <div class="container" id="QR-Code">
          <div class="panel panel-info">
              <div class="panel-heading">
                  <h4>Scan the QR code of the desired object</h4>
                  <div style="float:right;text-align: right;">
                      <select class="form-control" id="camera-select"></select>
                      <!--<button title="Image shoot" class="btn btn-info btn-sm disabled" id="grab-img" type="button" data-toggle="tooltip"><span class="glyphicon glyphicon-picture"></span></button>-->
                      <!--<button title="Play" class="btn btn-success btn-sm" id="play" type="button" data-toggle="tooltip"><span class="glyphicon glyphicon-play"></span></button>-->
                      <!--<button title="Pause" class="btn btn-warning btn-sm" id="pause" type="button" data-toggle="tooltip"><span class="glyphicon glyphicon-pause"></span></button>-->
                      <!--<button title="Stop streams" class="btn btn-danger btn-sm" id="stop" type="button" data-toggle="tooltip"><span class="glyphicon glyphicon-stop"></span></button>-->
            </div>
        </div>
        <div class="panel-body text-center">
            <div class="col-md-6">
                <div class="well" style="position: relative;display: inline-block;">
                    <canvas width="320" height="240" id="webcodecam-canvas"></canvas>
                    <div class="scanner-laser laser-rightBottom" style="opacity: 0.5;"></div>
                    <div class="scanner-laser laser-rightTop" style="opacity: 0.5;"></div>
                    <div class="scanner-laser laser-leftBottom" style="opacity: 0.5;"></div>
                    <div class="scanner-laser laser-leftTop" style="opacity: 0.5;"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="thumbnail" id="result">
                    <!--<div class="well">
                        <img width="160" height="120" id="scanned-img" src="">
                    </div>-->
                    <div class="caption">
                        <h5>Scanned result</h5>
                        <p id="scanned-QR"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</script>
<script type="text/template" id="color-picker-dialog-template">
    <div class="color-picker-request">
        <span>Set the color of the Object with Id:</span><br>
        <span><%= objectID %></span><br>
        <p><input type='text' id="picker" /></p>
    </div>
</script>
  <!-- END: Underscore Template Definition. -->

{{/extend}}
